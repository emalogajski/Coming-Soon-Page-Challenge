<!DOCTYPE html>
<html>

<head>
    <link href="site.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,600&display=swap" rel="stylesheet">
</head>

<body>
    <main>
        <section class="logo" id="logo">
            <img src="logo.svg" alt="logo">
        </section>
        <section class="images">  
            <div class="background">
                <img src="bg-pattern-desktop.svg" alt="Background">
            </div>
            <picture>
                <source media="(orientation: landscape)" srcset="hero-desktop.jpg" sizes="(min-width: 376px)">
                <source media="(orientation: portrait)" srcset="hero-mobile.jpg 375w" sizes="(max-width: 375px)">
                <img src="hero-desktop.jpg" alt="Portrait of a Girl">
            </picture> 
        </section>
        <section class="container">
            <div class="were">
                WE'RE
            </div>
            <div class="comingSoon">
                <b>COMING <br>SOON </b> 
            </div>
        </section>        
        <section class="mainText">Hello fellow shoppers! We're currently building our new<br><br>
            fashion store. Add your email below to stay up-to-date with <br><br>
            announcements and our launch deals.<br><br><br><br>
            <input style="color: black" type="text" id="Email" placeholder="Email Address"value="">
            <img src="icon-error.svg" id="error" style="display: none" alt="Error">
            <button class="button" type="button" onkeypress="myFunction()">
                <svg id="arrow" xmlns="http://www.w3.org/2000/svg" width="12" height="20"><path 
                    fill="none" stroke="#FFF" stroke-width="2" d="M1 1l8.836 8.836L1 18.671"/></svg>
            </button>
            <section id="message" type="text"></section>
        </section>
    </main>
</body>

<script>

function validateEmail(email) {
    let valid = tester.test(email);
    if (valid) {
        return true;
    } else {
        return false;
    }
}


    let btn = document.querySelector('button');
    let input = document.querySelector('input');
    let message = document.getElementById('message');
    let tester = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

    btn.addEventListener('click', () => {
        let email = input.value;
        let isValid = validateEmail(email);
        let borderEmail = document.getElementById("Email");
        let error = document.getElementById("error");

        if (!isValid) {
            message.innerHTML = "Please provide a valid email";
            borderEmail.style.border = "1px solid red";
            error.style.display = "block";
            message.style.color = "hsl(0, 74%, 74%)";
        } else {
            input.value = "";
            message.innerHTML = "Thank you! We will contact you shortly.";
            message.style.color = "hsl(143, 40%, 44%)";
            borderEmail.style.border = "1px solid hsla(0, 36%, 70%, 0.411)";
            error.style.display = "none";
        }
})


    
</script>

</html>


<!--<form>
    <input type="text" id="Email" name="fname">
    <input type="image" src="icon-arrow.svg" alt="Submit" align="right" width="48" height="48">
    /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
</form>-->

<!--Why didn't it work when I tried to put evertyhing into one addEventListener instead of making a separate 
validateEmail function?-->